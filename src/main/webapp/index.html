<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Gallery</title>

<script type="text/javascript">
<!--
	function showPicture(name) {
		let xmlhttp;

		if (window.XMLHttpRequest) {
			xmlhttp = new XMLHttpRequest();
		} else {
			// code for IE6, IE5
			xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
		}

		xmlhttp.onreadystatechange = function() {
			if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
				document.getElementById("picture").innerHTML = "hehe";
			}
		}
		xmlhttp.open("GET", "rest/method/picInfo/" + name, true);
		xmlhttp.send();
	}
	function thumbnails(tag) {
		let xmlhttp;

		if (window.XMLHttpRequest) {
			xmlhttp = new XMLHttpRequest();
		} else {
			// code for IE6, IE5
			xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
		}

		xmlhttp.onreadystatechange = function() {
			if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
				let text = xmlhttp.responseText;
				let array = JSON.parse(text);
				let html = "";

				html += '<h2>Thumbnails</h2>'
				for (let i = 0; i < array.length; i++) {
					html += "<img src='servlets/getThumb?name=" + array[i]
							+ "' onClick="showPicture("'+array[i]+'")"></img>";

					if ((i + 1) % 3 == 0) {
						html += '<br>';
					}
				}
				document.getElementById("thumbnails").innerHTML = html;
			}
		}
		xmlhttp.open("GET", "rest/methods/thumbnails/" + tag, true);
		xmlhttp.send();
	}

	function fillTags() {
		var xmlhttp;
		if (window.XMLHttpRequest) {
			xmlhttp = new XMLHttpRequest();
		} else {
			// code for IE6, IE5
			xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
		}
		xmlhttp.onreadystatechange = function() {
			if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
				var text = xmlhttp.responseText;
				var array = JSON.parse(text);
				var html = "";
				html += '<h2>List of tags</h2>';
				for (var i = 0; i < array.length; i++) {
					html += '<input type="button" value="' + array[i]
							+ '" class="button" onClick="thumbnails(\''
							+ array[i] + '\')" />';
					if ((i + 1) % 3 == 0) {
						html += '<br>';
					}
				}
				document.getElementById("tags").innerHTML = html;
			}
		}
		xmlhttp.open("GET", "rest/methods/index", true);
		xmlhttp.send();
	}
//-->
</script>

</head>
<link href="design.css" rel="stylesheet" type="text/css">
<body onload="fillTags();">
	<h1 align="center">Vehicle gallery</h1>
	<div id="container">
		<div id="tags">&nbsp;</div>
		<div id="thumbnails">&nbsp;</div>
	</div>
	<div id="picture">&nbsp;</div>

</body>
</html>